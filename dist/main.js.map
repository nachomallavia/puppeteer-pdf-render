{"version":3,"file":"main.js","mappings":"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","sources":["webpack://puppeteer-render/./helpers.js","webpack://puppeteer-render/./pdfLogic.js","webpack://puppeteer-render/./renderLogic.js","webpack://puppeteer-render/external commonjs \"dotenv\"","webpack://puppeteer-render/external commonjs \"express\"","webpack://puppeteer-render/external commonjs \"express-handlebars\"","webpack://puppeteer-render/external commonjs \"fs\"","webpack://puppeteer-render/external commonjs \"handlebars\"","webpack://puppeteer-render/external commonjs \"path\"","webpack://puppeteer-render/external commonjs \"puppeteer\"","webpack://puppeteer-render/webpack/bootstrap","webpack://puppeteer-render/./index.js"],"sourcesContent":["module.exports = {\n    ifEquals: function (a, b, options) {\n        if (a === b) {\n            return options.fn(this);\n        } else {\n            return options.inverse(this);\n        }\n    },\n    multiply: function (a, b) {\n        return a * b;\n    },\n\n    groupBy: function (arr, selectedKey, secondKey) {\n        let sortStore = [];\n        let filteredCategories = [];\n        if (arr != undefined) {\n            for (let i = 0; i < arr.length; i++) {\n                let currentCategory = arr[i][selectedKey];\n                let currentSecondary = arr[i][secondKey];\n                let lastCategory = '';\n                let lastSecondary = '';\n                if (i != 0) {\n                    lastCategory = arr[i - 1][selectedKey];\n                    lastSecondary = arr[i - 1][secondKey];\n                }\n                if (\n                    currentCategory + currentSecondary !=\n                        lastCategory + lastSecondary &&\n                    filteredCategories.indexOf(\n                        currentCategory + currentSecondary\n                    ) === -1\n                ) {\n                    filteredCategories.push(currentCategory + currentSecondary);\n                    let filteredArray = arr.filter((element) => {\n                        return (\n                            element[selectedKey] == currentCategory &&\n                            element[secondKey] == currentSecondary\n                        );\n                    });\n                    sortStore.push(filteredArray);\n                }\n            }\n            sortStore.forEach((category) => {\n                let sortedCategory = category.sort((a, b) => {\n                    return new Date(b.FechaVto) - new Date(a.FechaVto);\n                });\n                return sortedCategory;\n            });\n        }\n\n        return sortStore;\n    },\n    formatDate: function (timestamp) {\n        if (timestamp == '' || timestamp == null) {\n            return '';\n        }\n        let date = new Date(timestamp);\n        let simplified = new Intl.DateTimeFormat('es-AR').format(date);\n        return simplified;\n    },\n    compare: function (variableOne, comparator, variableTwo) {\n        if (eval(variableOne + comparator + variableTwo)) {\n            return true;\n        } else {\n            return false;\n        }\n    },\n    minus: function (value) {\n        let newValue = value * -1;\n        return newValue;\n    },\n    today: function () {\n        let today = Date.now();\n        let simplified = new Intl.DateTimeFormat('es-AR').format(today);\n        return simplified;\n    },\n    sumarSaldos: function (saldos) {\n        let total = 0;\n        if (saldos != undefined && saldos[0] != undefined) {\n            total =\n                saldos[0].SaldoCSTitular +\n                saldos[0].SaldoCSAdherente +\n                saldos[0].SaldoServicios +\n                saldos[0].SaldoCreditos;\n            if (saldos[0].ImporteSinAplicar) {\n                total -= saldos[0].ImporteSinAplicar;\n            }\n        }\n        if (total > 0) {\n            return total;\n        } else {\n            return 0;\n        }\n    },\n    format: function (number) {\n        let rounder = new Intl.NumberFormat('es-AR', {\n            style: 'decimal',\n            maximumFractionDigits: 0,\n            minimumFractionDigits: 0,\n        });\n        let formatter = new Intl.NumberFormat('es-AR', {\n            style: 'decimal',\n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2,\n        });\n        let numString;\n        if (number % 1 == 0) {\n            numString = rounder.format(number);\n        } else {\n            numString = formatter.format(number);\n        }\n        let formated = numString.split(' ').join('');\n        return formated;\n    },\n    renderMin: function (variableOne, variableTwo) {\n        if (variableOne < variableTwo) {\n            return variableOne;\n        } else {\n            return variableTwo;\n        }\n    },\n};\n","const puppeteer = require('puppeteer');\n\nrequire('dotenv').config();\n\nconst pdfLogic = async (req) => {\n    const browser = await puppeteer.launch({\n        args: [\n            '--disable-setuid-sandbox',\n            '--no-sandbox',\n            '--single-process',\n            '--no-zygote',\n        ],\n        executablePath:\n            process.env.NODE_ENV === 'production' &&\n            process.env.NODE_SERVER === 'render'\n                ? process.env.PUPPETEER_EXECUTABLE_PATH\n                : process.env.PUPPETEER_ALT_PATH,\n    });\n    try {\n        console.log('trying to make a PDF');\n        const page = await browser.newPage();\n\n        // await page.setContent('<html><body><h1>HOLA</h1></body></html>');\n        const htmlContent = req.body.html;\n        await page.setContent(htmlContent, {\n            waitUntil: 'networkidle0',\n        });\n        await page.setViewport({ width: 1440, height: 1880 });\n        await page.emulateMediaType('screen');\n\n        const file = await page.pdf({\n            format: 'A4',\n            printBackground: true,\n            margin: {\n                top: 10,\n            },\n        });\n\n        await browser.close();\n        return file;\n        // res.send('ok');\n    } catch (e) {\n        console.error(e);\n    } finally {\n        await browser.close();\n    }\n};\n\nmodule.exports = { pdfLogic };\n","const { readFile, readFileSync } = require('fs');\nconst path = require('path');\n\nmodule.exports = async function (templateName, dataObject) {\n    const Handlebars = require('handlebars');\n    let templatePath = path.join(__dirname, 'templates', templateName) + '.hbs';\n    const content = readFileSync(templatePath, { encodig: 'utf8' });\n    Handlebars.registerHelper('sumarSaldos', (saldos) => {\n        let total = 0;\n        if (saldos != undefined && saldos[0] != undefined) {\n            total =\n                saldos[0].SaldoCSTitular +\n                saldos[0].SaldoCSAdherente +\n                saldos[0].SaldoServicios +\n                saldos[0].SaldoCreditos;\n            if (saldos[0].ImporteSinAplicar) {\n                total -= saldos[0].ImporteSinAplicar;\n            }\n        }\n        if (total > 0) {\n            return total;\n        } else {\n            return 0;\n        }\n    });\n    Handlebars.registerHelper('renderMin', function (variableOne, variableTwo) {\n        if (variableOne < variableTwo) {\n            return variableOne;\n        } else {\n            return variableTwo;\n        }\n    });\n    Handlebars.registerHelper('format', function (number) {\n        let rounder = new Intl.NumberFormat('es-AR', {\n            style: 'decimal',\n            maximumFractionDigits: 0,\n            minimumFractionDigits: 0,\n        });\n        let formatter = new Intl.NumberFormat('es-AR', {\n            style: 'decimal',\n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2,\n        });\n        let numString;\n        if (number % 1 == 0) {\n            numString = rounder.format(number).toString();\n        } else {\n            numString = formatter.format(number).toString();\n        }\n        if (number == undefined) {\n            numString = '0';\n        }\n        let formated = numString.split(' ').join('');\n        return formated;\n    });\n    Handlebars.registerHelper('formatDate', (timestamp) => {\n        if (timestamp == '' || timestamp == null) {\n            return '';\n        }\n        let date = new Date(timestamp);\n        let simplified = new Intl.DateTimeFormat('es-AR').format(date);\n        return simplified;\n    });\n    Handlebars.registerHelper(\n        'groupBy',\n        function (arr, selectedKey, secondKey) {\n            let sortStore = [];\n            let filteredCategories = [];\n            if (arr != undefined) {\n                for (let i = 0; i < arr.length; i++) {\n                    let currentCategory = arr[i][selectedKey];\n                    let currentSecondary = arr[i][secondKey];\n                    let lastCategory = '';\n                    let lastSecondary = '';\n                    if (i != 0) {\n                        lastCategory = arr[i - 1][selectedKey];\n                        lastSecondary = arr[i - 1][secondKey];\n                    }\n                    if (\n                        currentCategory + currentSecondary !=\n                            lastCategory + lastSecondary &&\n                        filteredCategories.indexOf(\n                            currentCategory + currentSecondary\n                        ) === -1\n                    ) {\n                        filteredCategories.push(\n                            currentCategory + currentSecondary\n                        );\n                        let filteredArray = arr.filter((element) => {\n                            return (\n                                element[selectedKey] == currentCategory &&\n                                element[secondKey] == currentSecondary\n                            );\n                        });\n                        sortStore.push(filteredArray);\n                    }\n                }\n                sortStore.forEach((category) => {\n                    let sortedCategory = category.sort((a, b) => {\n                        return new Date(b.FechaVto) - new Date(a.FechaVto);\n                    });\n                    return sortedCategory;\n                });\n            }\n            return sortStore;\n        }\n    );\n    Handlebars.registerHelper('ifEquals', function (a, b, options) {\n        if (a === b) {\n            return options.fn(this);\n        } else {\n            return options.inverse(this);\n        }\n    });\n    Handlebars.registerHelper(\n        'compare',\n        function (variableOne, comparator, variableTwo) {\n            if (eval(variableOne + comparator + variableTwo)) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n    );\n    Handlebars.registerHelper('minus', function (value) {\n        let newValue = value * -1;\n        return newValue > 0 ? newValue : 0;\n    });\n    Handlebars.registerHelper('today', function () {\n        let today = Date.now();\n        let simplified = new Intl.DateTimeFormat('es-AR').format(today);\n        return simplified;\n    });\n    const template = Handlebars.compile(`${content}`);\n    const html = template(dataObject);\n    return html;\n};\n","module.exports = require(\"dotenv\");","module.exports = require(\"express\");","module.exports = require(\"express-handlebars\");","module.exports = require(\"fs\");","module.exports = require(\"handlebars\");","module.exports = require(\"path\");","module.exports = require(\"puppeteer\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const express = require('express');\nrequire('dotenv').config();\nconst app = express();\n\nconst exphbs = require('express-handlebars');\nconst hbs = exphbs.create({\n    helpers: require('./helpers'),\n    extname: '.hbs',\n    defaultLayout: false,\n});\n\nconst path = require('path');\nconst { pdfLogic } = require('./pdfLogic');\nconst renderLogic = require('./renderLogic');\nconst token = process.env.API_TOKEN;\n\nconst PORT = process.env.PORT || 4000;\n\nfunction filterDates(userData) {\n    let servicesArr = userData.serviciosRepositorio;\n    if (servicesArr != undefined) {\n        let data = servicesArr.filter((service) => {\n            console.log(userData);\n            let string = service.FechaVto;\n            let dateToCheck = new Date(string);\n            // console.log('Date to check is:', dateToCheck);\n            let today = new Date();\n\n            // console.log('Today is:', today);\n\n            let check =\n                dateToCheck < today ||\n                dateToCheck.getUTCMonth() == today.getUTCMonth();\n            // console.log(check);\n            return check;\n        });\n        userData.serviciosRepositorio = data;\n    }\n    return userData;\n}\nfunction calcularMora(userData) {\n    let creditosAdministradosMora = userData.creditosAdministrados;\n    creditosAdministradosMora.forEach((credito) => {\n        if (credito.Estado == 'Mora') {\n            credito.Mora = credito.ValorCuota * credito.Cuotas_Impagas;\n        }\n    });\n    userData.creditosAdministrados = creditosAdministradosMora;\n    return userData;\n}\napp.engine('.hbs', hbs.engine);\napp.engine('.html', hbs.engine);\n\napp.use(express.json());\n\napp.set('view engine', 'hbs');\napp.set('views', path.join(__dirname, 'templates'));\napp.use(express.urlencoded({ extended: true }));\napp.use(express.static(path.join(__dirname, 'public')));\n\napp.get('/', (req, res) => {\n    res.sendFile(path.join(__dirname, 'index.html'));\n});\napp.get('/:id', async (req, res) => {\n    const id = req.params.id;\n    const data = await fetch(\n        `https://sistema.mundoamtae.com/alianzas/Api/SalesForce/GetReporteEstadoCuenta/${token}/${id}`\n    );\n\n    if (data.status == 200) {\n        const content = await data.json();\n        console.log(content);\n        let newData = filterDates(content);\n        // newData = calcularMora(newData);\n        res.render('estado-de-cuenta', newData);\n    } else if (data.status == 400) {\n        console.log(data);\n    }\n});\napp.get('/:id/pdf/', async (req, res) => {\n    const id = req.params.id;\n    const data = await fetch(\n        `https://sistema.mundoamtae.com/alianzas/Api/SalesForce/GetReporteEstadoCuenta/${token}/${id}`\n    );\n\n    if (data.status == 200) {\n        const templateName = 'estado-de-cuenta';\n        const content = await data.json();\n        let newData = filterDates(content);\n        // newData = calcularMora(newData);\n        const html = await renderLogic(templateName, newData);\n        req.body.html = html;\n        const pdf = await pdfLogic(req);\n        res.set('content-type', 'application/pdf');\n        res.send(pdf);\n    } else if (data.status == 400) {\n        console.log(data);\n    }\n});\napp.get('/:id/ampliar', async (req, res) => {\n    const id = req.params.id;\n    const data = await fetch(\n        `https://sistema.mundoamtae.com/alianzas/Api/SalesForce/GetReporteEstadoCuenta/${token}/${id}`\n    );\n\n    if (data.status == 200) {\n        const content = await data.json();\n        let newData = filterDates(content);\n        // newData = calcularMora(newData);\n        res.render('estado-de-cuenta-ampliado', newData);\n    } else if (data.status == 400) {\n        console.log(data);\n    }\n});\napp.get('/:id/ampliar/pdf/', async (req, res) => {\n    const id = req.params.id;\n    const data = await fetch(\n        `https://sistema.mundoamtae.com/alianzas/Api/SalesForce/GetReporteEstadoCuenta/${token}/${id}`\n    );\n\n    if (data.status == 200) {\n        const templateName = 'estado-de-cuenta-ampliado';\n        const content = await data.json();\n        let newData = filterDates(content);\n        // newData = calcularMora(newData);\n        const html = await renderLogic(templateName, newData);\n        req.body.html = html;\n        const pdf = await pdfLogic(req);\n        res.set('content-type', 'application/pdf');\n        res.send(pdf);\n    } else if (data.status == 400) {\n        console.log(data);\n    }\n});\n\napp.listen(PORT, () => {\n    console.log(`Listening on port ${PORT}`);\n});\n"],"names":["module","exports","ifEquals","a","b","options","fn","this","inverse","multiply","groupBy","arr","selectedKey","secondKey","sortStore","filteredCategories","undefined","i","length","currentCategory","currentSecondary","lastCategory","lastSecondary","indexOf","push","filteredArray","filter","element","forEach","category","sort","Date","FechaVto","formatDate","timestamp","date","Intl","DateTimeFormat","format","compare","variableOne","comparator","variableTwo","eval","minus","value","today","now","sumarSaldos","saldos","total","SaldoCSTitular","SaldoCSAdherente","SaldoServicios","SaldoCreditos","ImporteSinAplicar","number","numString","rounder","NumberFormat","style","maximumFractionDigits","minimumFractionDigits","formatter","split","join","renderMin","puppeteer","pdfLogic","async","req","browser","launch","args","executablePath","process","env","NODE_SERVER","PUPPETEER_EXECUTABLE_PATH","PUPPETEER_ALT_PATH","console","log","page","newPage","htmlContent","body","html","setContent","waitUntil","setViewport","width","height","emulateMediaType","file","pdf","printBackground","margin","top","close","e","error","path","templateName","dataObject","Handlebars","templatePath","__dirname","content","readFileSync","encodig","registerHelper","toString","newValue","template","compile","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","express","app","exphbs","hbs","create","helpers","extname","defaultLayout","renderLogic","token","API_TOKEN","PORT","filterDates","userData","servicesArr","serviciosRepositorio","data","service","string","dateToCheck","getUTCMonth","calcularMora","creditosAdministradosMora","creditosAdministrados","credito","Estado","Mora","ValorCuota","Cuotas_Impagas","engine","use","json","set","urlencoded","extended","static","get","res","sendFile","id","params","fetch","status","newData","render","send","listen"],"sourceRoot":""}